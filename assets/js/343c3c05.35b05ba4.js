"use strict";(globalThis.webpackChunkwatchmen_docs=globalThis.webpackChunkwatchmen_docs||[]).push([[66727],{28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>i});var s=n(96540);const o={},d=s.createContext(o);function l(e){const t=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),s.createElement(d.Provider,{value:t},e.children)}},80642:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"cli-tools/deploy","title":"Deployment","description":"watchmen-cli provide two kind of command of deploy:","source":"@site/docs/080-cli-tools/100-deployment.md","sourceDirName":"080-cli-tools","slug":"/cli-tools/deploy","permalink":"/docs/next/cli-tools/deploy","draft":false,"unlisted":false,"editUrl":"https://github.com/Indexical-Metrics-Measure-Advisory/watchmen-docs/tree/main/docs/080-cli-tools/100-deployment.md","tags":[],"version":"current","lastUpdatedBy":"luke0623","lastUpdatedAt":1770298247000,"sidebarPosition":10,"frontMatter":{"id":"deploy","title":"Deployment","sidebar_position":10},"sidebar":"sidebar","previous":{"title":"CLI Overview","permalink":"/docs/next/cli-tools/cli-index"},"next":{"title":"Rerun","permalink":"/docs/next/cli-tools/rerun"}}');var o=n(74848),d=n(28453);const l={id:"deploy",title:"Deployment",sidebar_position:10},i="Deployment Command",r={},c=[{value:"deploy_asset",id:"deploy_asset",level:2},{value:"deploy",id:"deploy",level:2}];function a(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"deployment-command",children:"Deployment Command"})}),"\n",(0,o.jsx)(t.p,{children:"watchmen-cli provide two kind of command of deploy:"}),"\n",(0,o.jsx)(t.h2,{id:"deploy_asset",children:"deploy_asset"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:"        def deploy_asset():\n"})}),"\n",(0,o.jsx)(t.p,{children:'The command "deploy_asset" have no arguments.\nYou can use the dotenv file to set the configuration of command.'}),"\n",(0,o.jsx)(t.p,{children:".env file"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-dotenv",children:"META_CLI_HOST = http://localhost:8000\nMETA_CLI_USERNAME = watchmen-user\nMETA_CLI_PASSWORD = change-me\nMETA_CLI_PAT = None # no need when the username and passowrd are setted\nMETA_CLI_DEPLOY_FOLDER = /app/config\nMETA_CLI_DEPLOY_PATTERN = REPLACE\n"})}),"\n",(0,o.jsx)(t.p,{children:"run command"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-commandline",children:"docker run --rm --env-file /usr/watchmen/watchmen-cli/env.list ghcr.io/indexical-metrics-measure-advisory/watchmen-cli:16.3.0\n"})}),"\n",(0,o.jsx)(t.h2,{id:"deploy",children:"deploy"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:"\tdef deploy(\n\t\t\thost: Optional[str],\n\t\t\tpath: Optional[str],\n\t\t\tpattern: Optional[MixedImportType] = 'replace',\n\t\t\tusername: Optional[str] = None,\n\t\t\tpassword: Optional[str] = None,\n\t\t\tpat: Optional[str] = None\n\t)\n"})}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"Parameter"}),(0,o.jsx)(t.th,{children:"Type"}),(0,o.jsx)(t.th,{children:"Description"})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"host"}),(0,o.jsx)(t.td,{children:"str"}),(0,o.jsx)(t.td,{children:"The host fo the watchmen application."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"path"}),(0,o.jsx)(t.td,{children:"str"}),(0,o.jsx)(t.td,{children:"The path of deploy config file."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"pattern"}),(0,o.jsx)(t.td,{children:"MixedImportType"}),(0,o.jsx)(t.td,{children:'Import type, usually use "replace"'})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"username"}),(0,o.jsx)(t.td,{children:"str"}),(0,o.jsx)(t.td,{children:"The username of the watchmen application. if pat exist, no need."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"password"}),(0,o.jsx)(t.td,{children:"str"}),(0,o.jsx)(t.td,{children:"The password of the watchmen application. if pat exist, no need."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"pat"}),(0,o.jsx)(t.td,{children:"str"}),(0,o.jsx)(t.td,{children:"The person access token of the watchmen application. if username and password exist, no need."})]})]})]}),"\n",(0,o.jsx)(t.p,{children:"run command"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-commandline",children:"python ./src/cli.py deploy --path='/app/config' --host='http://localhost:8000' --username='watchmen-user' --password='change-me'\n"})}),"\n",(0,o.jsx)(t.h1,{id:"deploy-config-file",children:"Deploy Config File"}),"\n",(0,o.jsx)(t.p,{children:"The config file of deploy command is a markdown file, which exported from the watchmen application."})]})}function h(e={}){const{wrapper:t}={...(0,d.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}}}]);