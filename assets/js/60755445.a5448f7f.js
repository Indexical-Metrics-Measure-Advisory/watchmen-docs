"use strict";(globalThis.webpackChunkwatchmen_docs=globalThis.webpackChunkwatchmen_docs||[]).push([[28351],{28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var s=i(96540);const t={},a=s.createContext(t);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(a.Provider,{value:n},e.children)}},35662:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"data-ingestion/data-ingestion","title":"Data Ingestion Strategy","description":"Watchmen advocates a fundamental shift in data ingestion: transforming raw transactions into domain events rather than simply replicating table changes. This approach prioritizes business semantics over database schema replication.","source":"@site/versioned_docs/version-18.0.0/030-data-ingestion/130-data ingestion.md","sourceDirName":"030-data-ingestion","slug":"/data-ingestion/data-ingestion","permalink":"/docs/18.0.0/data-ingestion/data-ingestion","draft":false,"unlisted":false,"editUrl":"https://github.com/Indexical-Metrics-Measure-Advisory/watchmen-docs/tree/main/versioned_docs/version-18.0.0/030-data-ingestion/130-data ingestion.md","tags":[],"version":"18.0.0","lastUpdatedBy":"luke0623","lastUpdatedAt":1770298247000,"sidebarPosition":3,"frontMatter":{"id":"data-ingestion","title":"Data Ingestion Strategy","sidebar_position":3},"sidebar":"sidebar","previous":{"title":"Watchmen Ingestion","permalink":"/docs/18.0.0/data-ingestion/collector-index"},"next":{"title":"Model Configuration","permalink":"/docs/18.0.0/data-ingestion/configuration-for-change-data-capture/model-config"}}');var t=i(74848),a=i(28453);const r={id:"data-ingestion",title:"Data Ingestion Strategy",sidebar_position:3},o="Domain-Oriented Ingestion",l={},d=[{value:"Table Events vs. Domain Events",id:"table-events-vs-domain-events",level:2},{value:"Limitations of Table-Level CDC",id:"limitations-of-table-level-cdc",level:3},{value:"The Domain Event Approach",id:"the-domain-event-approach",level:3},{value:"Engineering Benefits",id:"engineering-benefits",level:2},{value:"Model-Defined Joins",id:"model-defined-joins",level:3},{value:"Consistency and State Management",id:"consistency-and-state-management",level:3},{value:"Alignment with Decision Granularity",id:"alignment-with-decision-granularity",level:3},{value:"Operational Impact",id:"operational-impact",level:2},{value:"For Business Analysts",id:"for-business-analysts",level:3},{value:"For Data Engineers",id:"for-data-engineers",level:3},{value:"Key Requirements",id:"key-requirements",level:2},{value:"Strategic Value",id:"strategic-value",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"domain-oriented-ingestion",children:"Domain-Oriented Ingestion"})}),"\n",(0,t.jsxs)(n.p,{children:["Watchmen advocates a fundamental shift in data ingestion: ",(0,t.jsx)(n.strong,{children:"transforming raw transactions into domain events rather than simply replicating table changes"}),". This approach prioritizes business semantics over database schema replication."]}),"\n",(0,t.jsx)(n.h2,{id:"table-events-vs-domain-events",children:"Table Events vs. Domain Events"}),"\n",(0,t.jsx)(n.h3,{id:"limitations-of-table-level-cdc",children:"Limitations of Table-Level CDC"}),"\n",(0,t.jsx)(n.p,{children:"Traditional Change Data Capture (CDC) streams database operations directly:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Table A INSERT\nTable B UPDATE\nTable C INSERT\n"})}),"\n",(0,t.jsx)(n.p,{children:"This approach presents several challenges:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Lack of Semantics"}),": Tables are storage units, not necessarily business facts."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Fragmentation"}),': A single business action (e.g., "Order Placed") often splits across multiple tables (Orders, Inventory, Payments).']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Unstable Ordering"}),": Reassembling the sequence of cross-table writes is complex and error-prone."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Downstream Burden"}),": Data engineers must reconstruct business logic and guess join conditions in every downstream pipeline."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"the-domain-event-approach",children:"The Domain Event Approach"}),"\n",(0,t.jsx)(n.p,{children:"Instead of replicating storage details, Watchmen encourages extracting complete business events based on the domain model at the moment of ingestion."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example: OrderPlaced Event"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"OrderPlaced\n- Order Details\n- Customer Profile snapshot\n- Line Items\n- Payment Status\n- Shipping Address\n"})}),"\n",(0,t.jsx)(n.p,{children:"This structure achieves three objectives:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Encapsulates Semantics"}),": The event carries the full context of the business action."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Pre-defined Relationships"}),": Cross-table relationships are resolved at definition time, not query time."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Consumer-Ready"}),": Downstream systems receive complete facts without needing complex joins."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"engineering-benefits",children:"Engineering Benefits"}),"\n",(0,t.jsx)(n.h3,{id:"model-defined-joins",children:"Model-Defined Joins"}),"\n",(0,t.jsx)(n.p,{children:"In table-level CDC, joins are often implemented repeatedly and inconsistently across different pipelines. In the domain-model approach, joins are defined once during event construction. This creates a single source of truth for data relationships, making the system testable and versionable."}),"\n",(0,t.jsx)(n.h3,{id:"consistency-and-state-management",children:"Consistency and State Management"}),"\n",(0,t.jsx)(n.p,{children:"Table-level streams often expose intermediate, inconsistent states (e.g., an order created but not yet paid). Domain events are emitted only when the business transaction is complete, ensuring that downstream systems process only valid, consistent facts. This is critical for real-time KPIs and risk control."}),"\n",(0,t.jsx)(n.h3,{id:"alignment-with-decision-granularity",children:"Alignment with Decision Granularity"}),"\n",(0,t.jsx)(n.p,{children:'Business decisions depend on actions (e.g., "User Churned"), not database updates (e.g., "Status column changed to 0"). Domain events naturally align data engineering with business decision-making processes.'}),"\n",(0,t.jsx)(n.h2,{id:"operational-impact",children:"Operational Impact"}),"\n",(0,t.jsx)(n.h3,{id:"for-business-analysts",children:"For Business Analysts"}),"\n",(0,t.jsx)(n.p,{children:'The shift simplifies data consumption. Analysts work with recognizable business concepts ("Order Placed") rather than deciphering complex schemas and join logic ("Order Table + Inventory Table + Log Table").'}),"\n",(0,t.jsx)(n.h3,{id:"for-data-engineers",children:"For Data Engineers"}),"\n",(0,t.jsx)(n.p,{children:"While this approach requires more upfront effort in domain modeling and governance, it significantly reduces long-term maintenance costs. It accelerates downstream development, reduces bug density, and ensures metric definitions converge."}),"\n",(0,t.jsx)(n.h2,{id:"key-requirements",children:"Key Requirements"}),"\n",(0,t.jsx)(n.p,{children:"To successfully implement this strategy, the architecture must support:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Versioning"}),": Domain models evolve. The system must handle schema evolution (e.g., v1/v2 events) to prevent breaking downstream consumers."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Raw Data Retention"}),": Domain events are derived. The system must retain the raw CDC stream to allow for lineage tracing, error correction, and replaying history."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Declarative Events"}),": Events should represent facts (",(0,t.jsx)(n.code,{children:"OrderPlaced"}),", ",(0,t.jsx)(n.code,{children:"PaymentReceived"}),"), not computed derivatives (",(0,t.jsx)(n.code,{children:"MonthlySalesCalculated"}),")."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"strategic-value",children:"Strategic Value"}),"\n",(0,t.jsxs)(n.p,{children:["In complex scenarios like Retail or Insurance, structural data integrity is paramount. A unified ",(0,t.jsx)(n.code,{children:"OrderPlaced"})," event can simultaneously power:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Sales Performance Analysis"}),"\n",(0,t.jsx)(n.li,{children:"Inventory Optimization"}),"\n",(0,t.jsx)(n.li,{children:"Marketing Automation"}),"\n",(0,t.jsx)(n.li,{children:"AI Model Training"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This eliminates the need for each subsystem to independently reconstruct the data state, ensuring consistency across the enterprise."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);