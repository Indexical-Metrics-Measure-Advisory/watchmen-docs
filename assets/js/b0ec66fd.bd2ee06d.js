"use strict";(globalThis.webpackChunkwatchmen_docs=globalThis.webpackChunkwatchmen_docs||[]).push([[23063],{28453:(e,i,n)=>{n.d(i,{R:()=>d,x:()=>r});var s=n(96540);const t={},o=s.createContext(t);function d(e){const i=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(o.Provider,{value:i},e.children)}},33147:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/topic-snapshot-f7174cdd816cae84f9ed147492bab4d1.png"},38384:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/toolbox-c13240b4332eedaaac668dd9d09dbb2f.png"},49208:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/pipeline-trigger-8d1765c121d6c6fef5efeb6b5cd0d565.png"},67175:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/topic-snapshot-scheduler-291697008ca31003caa6f2b7f4598dd8.png"},93015:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"web-client/admin/toolbox","title":"Toolbox","description":"Tools for admin purpose.","source":"@site/versioned_docs/version-16.3/020-web-client/010-admin/130-toolbox.md","sourceDirName":"020-web-client/010-admin","slug":"/web-client/admin/toolbox","permalink":"/docs/16.3/web-client/admin/toolbox","draft":false,"unlisted":false,"editUrl":"https://github.com/Indexical-Metrics-Measure-Advisory/watchmen-docs/tree/main/versioned_docs/version-16.3/020-web-client/010-admin/130-toolbox.md","tags":[],"version":"16.3","lastUpdatedBy":"luke0623","lastUpdatedAt":1768279414000,"sidebarPosition":130,"frontMatter":{"id":"toolbox","title":"Toolbox","sidebar_position":130},"sidebar":"sidebar","previous":{"title":"Monitor Logs","permalink":"/docs/16.3/web-client/admin/monitor-logs"},"next":{"title":"Console Workbench Index","permalink":"/docs/16.3/web-client/console/console-wb-index"}}');var t=n(74848),o=n(28453);const d={id:"toolbox",title:"Toolbox",sidebar_position:130},r="Toolbox",l={},c=[{value:"Topic Snapshot",id:"topic-snapshot",level:2},{value:"Inside Story",id:"inside-story",level:3},{value:"Filter",id:"filter",level:4},{value:"Logic",id:"logic",level:4},{value:"Task Data Topic",id:"task-data-topic",level:4},{value:"Target Data Topic",id:"target-data-topic",level:4},{value:"Pipeline Trigger",id:"pipeline-trigger",level:2}];function a(e){const i={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"toolbox",children:"Toolbox"})}),"\n",(0,t.jsx)(i.p,{children:"Tools for admin purpose."}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Toolbox Index",src:n(38384).A+"",width:"3584",height:"1854"})}),"\n",(0,t.jsx)(i.h2,{id:"topic-snapshot",children:"Topic Snapshot"}),"\n",(0,t.jsx)(i.p,{children:"For catching topic data snapshot frequently, embedded schedulers could be defined here."}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Topic Snapshot",src:n(33147).A+"",width:"3584",height:"1854"})}),"\n",(0,t.jsx)(i.p,{children:"Here is an empty scheduler, define target topic name and filter."}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Topic Snapshot Scheduler",src:n(67175).A+"",width:"2200",height:"1524"})}),"\n",(0,t.jsx)(i.admonition,{type:"tip",children:(0,t.jsx)(i.p,{children:"Multiple schedulers for one source topic are allowed, they might have different frequencies, different filters."})}),"\n",(0,t.jsx)(i.h3,{id:"inside-story",children:"Inside Story"}),"\n",(0,t.jsx)(i.p,{children:"When a snapshot scheduler is defined, the following topics will be created,"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["A task data topic, which is prefixed by ",(0,t.jsx)(i.code,{children:"ss_"})]}),"\n",(0,t.jsx)(i.li,{children:"A target data topic, which named manually."}),"\n"]}),"\n",(0,t.jsx)(i.h4,{id:"filter",children:"Filter"}),"\n",(0,t.jsx)(i.p,{children:"A set of variables are available for filter data,"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"processStartDate"}),": process start date,"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"processStartYear"}),"/",(0,t.jsx)(i.code,{children:"processStartMonth"}),"/",(0,t.jsx)(i.code,{children:"processStartDay"}),": process start year/month/day, numeric value,"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"processEndDate"}),": process end date,"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"processEndYear"}),"/",(0,t.jsx)(i.code,{children:"processEndMonth"}),"/",(0,t.jsx)(i.code,{children:"processEndDay"}),": process end year/month/day, numeric value."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"For different frequency, the start and end date are different,"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Daily:","\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Start date: yesterday of job run date,"}),"\n",(0,t.jsx)(i.li,{children:"End date: yesterday of job run date,"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["Weekly:","\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Start date: last Sunday,"}),"\n",(0,t.jsx)(i.li,{children:"End date: last Saturday,"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:["Monthly:","\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Start date: first day of last month,"}),"\n",(0,t.jsx)(i.li,{children:"End date: last day of last month."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.admonition,{type:"caution",children:[(0,t.jsx)(i.mdxAdmonitionTitle,{}),(0,t.jsxs)(i.p,{children:["Process start date is logged into ",(0,t.jsx)(i.code,{children:"snapshot_job_locks"})," as process date, which means the ",(0,t.jsx)(i.code,{children:"process_date"})," is not the physical date of job\nrunning. Use ",(0,t.jsx)(i.code,{children:"created_at"})," instead to aware the exact job run date."]})]}),"\n",(0,t.jsxs)(i.admonition,{type:"tip",children:[(0,t.jsx)(i.mdxAdmonitionTitle,{}),(0,t.jsx)(i.p,{children:"Time of start date is 0 and time of end date is last millisecond of day."})]}),"\n",(0,t.jsx)(i.h4,{id:"logic",children:"Logic"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Once scheduler triggered, data from source topic are loaded by scheduler (filter applied), and write into task topic. Copy is executed at\nthe node which grabbed the job. Plus, to void instantaneous memory cost, copy to task is row by row."}),"\n",(0,t.jsx)(i.li,{children:"Each row of task topic will be treated as an insert row action, and trigger a pipeline to copy data to target topic. Pipeline is\ntriggerred on all doll nodes. Once task is grabbed, status of task will be changed to processed."}),"\n"]}),"\n",(0,t.jsx)(i.h4,{id:"task-data-topic",children:"Task Data Topic"}),"\n",(0,t.jsx)(i.p,{children:"Task data topic is a raw topic, which contains factors as below,"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"factors from source topic,"}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"originaldataid"}),": to identify the original ",(0,t.jsx)(i.code,{children:"id_"})," value of source data row,"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"status"}),": status of data row,","\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"ready"})," when task created,"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"processed"})," when task processed,"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"snapshottag"}),": a tag for filter data,","\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["for daily, format is ",(0,t.jsx)(i.code,{children:"d%Y%m%d"}),","]}),"\n",(0,t.jsxs)(i.li,{children:["for weekly, format is ",(0,t.jsx)(i.code,{children:"w%Y%U"}),","]}),"\n",(0,t.jsxs)(i.li,{children:["for monthly, format is ",(0,t.jsx)(i.code,{children:"m%Y%m"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"targettopicname"}),": target topic name. Multiple schedulers are allowed for snapshot catching."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"jobid"})," and ",(0,t.jsx)(i.code,{children:"schedulerid"}),": to identify the scheduler definition and job instance. ",(0,t.jsx)(i.code,{children:"jobid"})," is ",(0,t.jsx)(i.code,{children:"lock_id"})," in ",(0,t.jsx)(i.code,{children:"snapshot_job_locks"}),"."]}),"\n"]}),"\n",(0,t.jsx)(i.h4,{id:"target-data-topic",children:"Target Data Topic"}),"\n",(0,t.jsx)(i.p,{children:"Target data topic is a distinct topic, which contains factors as below,"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"factors from source topic,"}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"snapshottag"}),": a tag for filter data."]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"pipeline-trigger",children:"Pipeline Trigger"}),"\n",(0,t.jsx)(i.p,{children:"Use the existing data to re-trigger pipeline."}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Pipeline Trigger",src:n(49208).A+"",width:"1780",height:"928"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Choose topic,"}),"\n",(0,t.jsx)(i.li,{children:"Pick pipelines want to trigger,"}),"\n",(0,t.jsx)(i.li,{children:"Fill filter of topic."}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Fetch and trigger pipelines. Note if there are more than 1 thousand rows, then it can not be triggered in browser. In this scenario,\ndownload data to file and run them via CLI. Otherwise, it can be triggered in browser."}),"\n",(0,t.jsxs)(i.admonition,{type:"caution",children:[(0,t.jsx)(i.mdxAdmonitionTitle,{}),(0,t.jsx)(i.p,{children:"DO NOT close browser if it is running."})]})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);